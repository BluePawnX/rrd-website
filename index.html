<!doctype html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes, viewport-fit=cover">
<meta name="theme-color" content="#0b0b0b">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="format-detection" content="telephone=no">
<title>Home ‚Äî RRD Collection</title>
<meta name="description" content="RRD Collection curates bold, mood‚Äëdefining fragrances. Discover luxury perfumes that make unforgettable impressions.">
<meta property="og:title" content="Home ‚Äî RRD Collection">
<meta property="og:description" content="RRD Collection curates bold, mood‚Äëdefining fragrances. Discover luxury perfumes that make unforgettable impressions.">
<meta property="og:image" content="/assets/img/hero.png">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Home ‚Äî RRD Collection">
<meta name="twitter:description" content="RRD Collection curates bold, mood‚Äëdefining fragrances. Discover luxury perfumes that make unforgettable impressions.">
<meta name="twitter:image" content="/assets/img/hero.png">
<link rel="icon" href="/assets/img/logo.png">
<link rel="stylesheet" href="/assets/css/style.css">
<script src="/assets/js/data.js" defer></script>
<script src="/assets/js/ui.js" defer></script>
<script src="/assets/js/cart.js" defer></script>
<script src="/assets/js/analytics.js" defer></script>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2GJXXCKDX8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-2GJXXCKDX8');
</script>
</head><body>
<header>
  <div class="container header-inner">
    <a class="brand" href="/index.html"><img src="/assets/img/logo.png" alt="RRD Collection logo"><strong>RRD Collection</strong></a>
    <nav aria-label="primary" id="main-nav">
      <ul>
        <li><a href="/shop.html">Shop Perfumes</a></li>
        <li><a href="/about.html">About</a></li>
        <li><a href="/faq.html">FAQ</a></li>
        <li><a href="/contact.html">Contact</a></li>
      </ul>
    </nav>
    <div class="header-cart" onclick="toggleCart()">üõí <span class="badge" id="cart-count">0</span></div>
    <button class="mobile-nav-toggle" aria-label="Toggle navigation" onclick="toggleMobileNav()">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</header>
<div id="cart-drawer" aria-label="Cart drawer">
  <header><strong>Your Cart</strong><button class="btn secondary" onclick="toggleCart(false)">Close</button></header>
  <div class="cart-items"></div>
  <div class="cart-footer">
    <div class="currency-switch">Currency:
      <select id="currencySel"><option value="AED">AED</option><option value="INR">INR</option><option value="USD">USD</option></select>
    </div>
    <div class="cart-extras"></div>
    <div>Subtotal: <span class="cart-subtotal">AED 0.00</span></div>
    <button class="btn" onclick="checkoutWhatsApp()">Checkout via WhatsApp</button>
    <button class="btn secondary" onclick="checkoutEmail()">Checkout via Email</button>
  </div>
</div>

<main>
  <section class="hero">
    <div class="container"><div class="copy">
      <h1>RRD Collection</h1>
      <p>A scent isn't just a smell ‚Äî it's a signature. RRD Collection curates bold, mood‚Äëdefining fragrances for those who walk into the room already unforgettable.</p>
      <p><a class="btn" href="/shop.html">Shop Perfumes</a></p>
    </div></div>
  </section>
  
  <section class="container">
    <h2>Bestsellers</h2>
    <div class="grid" id="bestGrid"></div>
  </section>

  <!-- Bundles Section -->
  <section class="bundles">
    <div class="container">
      <h2>Curated Duos</h2>
      <p style="text-align:center;color:var(--muted);margin-bottom:32px">Save on perfectly paired fragrances</p>
      <div class="grid">
        <div class="bundle-card">
          <h3>Fresh & Clean Duo</h3>
          <p>Perfect for daily wear - crisp citrus meets clean amber</p>
          <div class="price">AED 249</div>
          <div class="savings">Save AED 19</div>
          <button class="btn" onclick="addBundleToCart('fresh-duo')">Add Duo to Cart</button>
        </div>
        <div class="bundle-card">
          <h3>Romance Collection</h3>
          <p>Floral romance for special occasions</p>
          <div class="price">AED 259</div>
          <div class="savings">Save AED 15</div>
          <button class="btn" onclick="addBundleToCart('romance-duo')">Add Duo to Cart</button>
        </div>
        <div class="bundle-card">
          <h3>Luxury Oriental Duo</h3>
          <p>Opulent oud and regal rose for unforgettable moments</p>
          <div class="price">AED 289</div>
          <div class="savings">Save AED 15</div>
          <button class="btn" onclick="addBundleToCart('luxury-duo')">Add Duo to Cart</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Quiz Section -->
  <section class="quiz">
    <div class="container">
      <div class="quiz-header">
        <div class="quiz-icon">üå∏</div>
        <h2>Find Your Perfect Scent</h2>
        <p class="quiz-subtitle">Discover your signature fragrance through our curated scent journey</p>
        <div class="quiz-progress">
          <div class="progress-bar">
            <div class="progress-fill"></div>
          </div>
          <span class="progress-text">Step 1 of 3</span>
        </div>
      </div>
      
      <div class="quiz-step active">
        <div class="step-header">
          <span class="step-number">01</span>
          <h3>What's your preferred scent intensity?</h3>
          <p class="step-description">Choose the fragrance strength that matches your personality</p>
        </div>
        <div class="quiz-options">
          <div class="quiz-option" data-value="light">
            <div class="option-icon">üí®</div>
            <div class="option-content">
              <h4>Light & Subtle</h4>
              <p>Gentle, close-to-skin fragrances that whisper elegance</p>
            </div>
            <div class="option-check">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20,6 9,17 4,12"></polyline>
              </svg>
            </div>
          </div>
          <div class="quiz-option" data-value="medium">
            <div class="option-icon">‚öñÔ∏è</div>
            <div class="option-content">
              <h4>Balanced</h4>
              <p>Moderate projection, noticeable but never overwhelming</p>
            </div>
            <div class="option-check">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20,6 9,17 4,12"></polyline>
              </svg>
            </div>
          </div>
          <div class="quiz-option" data-value="strong">
            <div class="option-icon">üî•</div>
            <div class="option-content">
              <h4>Bold & Memorable</h4>
              <p>Strong presence that makes an unforgettable entrance</p>
            </div>
            <div class="option-check">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20,6 9,17 4,12"></polyline>
            </div>
          </div>
        </div>
      </div>
      
      <div class="quiz-step">
        <div class="step-header">
          <span class="step-number">02</span>
          <h3>When do you plan to wear this fragrance?</h3>
          <p class="step-description">Select the occasions that define your lifestyle</p>
        </div>
        <div class="quiz-options">
          <div class="quiz-option" data-value="daily">
            <div class="option-icon">‚òÄÔ∏è</div>
            <div class="option-content">
              <h4>Daily Wear</h4>
              <p>Office, casual outings, and everyday sophistication</p>
            </div>
            <div class="option-check">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20,6 9,17 4,12"></polyline>
              </svg>
            </div>
          </div>
          <div class="quiz-option" data-value="evening">
            <div class="option-icon">üåô</div>
            <div class="option-content">
              <h4>Evening & Events</h4>
              <p>Dinner dates, parties, and special occasions</p>
            </div>
            <div class="option-check">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20,6 9,17 4,12"></polyline>
            </div>
          </div>
          <div class="quiz-option" data-value="both">
            <div class="option-icon">‚ú®</div>
            <div class="option-content">
              <h4>Versatile</h4>
              <p>Seamlessly transitions from day to evening</p>
            </div>
            <div class="option-check">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20,6 9,17 4,12"></polyline>
            </div>
          </div>
        </div>
      </div>
      
      <div class="quiz-step">
        <div class="step-header">
          <span class="step-number">03</span>
          <h3>What's your preferred fragrance family?</h3>
          <p class="step-description">Choose the scent profile that resonates with your soul</p>
        </div>
        <div class="quiz-options">
          <div class="quiz-option" data-value="fresh">
            <div class="option-icon">üçã</div>
            <div class="option-content">
              <h4>Fresh & Clean</h4>
              <p>Citrus, aquatic, and invigorating clean notes</p>
            </div>
            <div class="option-check">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20,6 9,17 4,12"></polyline>
            </div>
          </div>
          <div class="quiz-option" data-value="floral">
            <div class="option-icon">üåπ</div>
            <div class="option-content">
              <h4>Floral & Romantic</h4>
              <p>Rose, jasmine, and enchanting romantic blooms</p>
            </div>
            <div class="option-check">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20,6 9,17 4,12"></polyline>
            </div>
          </div>
          <div class="quiz-option" data-value="oriental">
            <div class="option-icon">üïØÔ∏è</div>
            <div class="option-content">
              <h4>Oriental & Spicy</h4>
              <p>Amber, oud, and warm, mysterious spices</p>
            </div>
            <div class="option-check">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20,6 9,17 4,12"></polyline>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Newsletter Section -->
  <section class="newsletter">
    <div class="container">
      <h2>Stay in the Loop</h2>
      <p>Be the first to know about new fragrances, exclusive offers, and fragrance tips</p>
      <form onsubmit="event.preventDefault(); handleNewsletterSubmit(event)">
        <input type="email" placeholder="Enter your email address" required>
        <button type="submit" class="btn">Subscribe</button>
      </form>
    </div>
  </section>
</main>

<!-- Floating WhatsApp Button -->
<div class="floating-whatsapp">
  <a href="https://wa.me/971559938295" target="_blank" rel="noopener" class="btn" aria-label="Chat on WhatsApp">
    üí¨
  </a>
</div>

<script>
  // Error handling and global scope verification
  (function() {
    'use strict';
    
    // Verify required globals are available
    if (typeof PRODUCTS === 'undefined') {
      console.error('PRODUCTS not found - check data.js include order');
      document.getElementById('bestGrid').innerHTML = '<p class="muted">Error loading products. Please refresh the page.</p>';
      return;
    }
    
    if (typeof avgRating === 'undefined' || typeof reviewsCount === 'undefined') {
      console.error('Helper functions missing - check data.js include order');
      return;
    }
    
    // DOM ready guard - only run once
    let isInitialized = false;
    
    function initializeHome() {
      if (isInitialized) return;
      isInitialized = true;
      
      try {
        // Initialize currency selector
        const currencySel = document.getElementById('currencySel');
        if (currencySel) {
          currencySel.value = currentCurrency();
          currencySel.addEventListener('change', e => setCurrency(e.target.value));
        }
        
        // Initialize cart count
        document.dispatchEvent(new Event('cart:updated'));
        const cartCountEl = document.getElementById('cart-count');
        if (cartCountEl) cartCountEl.textContent = cartCount();
        
        // Initialize quiz and newsletter
        if (typeof initQuiz === 'function') initQuiz();
        if (typeof initNewsletter === 'function') initNewsletter();
        
        // Render bestsellers with retry logic
        let retryCount = 0;
        const maxRetries = 10;
        
        function tryRenderBestsellers() {
          console.log('Checking for PRODUCTS data...', {
            typeof: typeof PRODUCTS,
            exists: !!PRODUCTS,
            length: PRODUCTS ? PRODUCTS.length : 'undefined'
          });
          
          if (typeof PRODUCTS !== 'undefined' && PRODUCTS && PRODUCTS.length > 0) {
            console.log('PRODUCTS data found, rendering bestsellers...');
            renderBestsellers();
          } else if (retryCount < maxRetries) {
            retryCount++;
            console.log(`Retrying bestsellers render (${retryCount}/${maxRetries})...`);
            setTimeout(tryRenderBestsellers, 200);
          } else {
            console.error('Failed to load PRODUCTS data after maximum retries');
            const bestGrid = document.getElementById('bestGrid');
            if (bestGrid) {
              bestGrid.innerHTML = '<p class="muted">Unable to load products. Please check your connection and refresh the page.</p>';
            }
          }
        }
        
        tryRenderBestsellers();
        
        // Bind events
        document.addEventListener('cart:updated', () => {
          const cartCount = document.getElementById('cart-count');
          if (cartCount) cartCount.textContent = cartCount();
        });
        
      } catch (error) {
        console.error('Error initializing home page:', error);
        toast('Error initializing home page', 'error');
      }
    }
    
    // Card renderer with defensive programming
    function card(p) {
      if (!p || !p.id || !p.name) {
        console.warn('Invalid product data:', p);
        return '';
      }
      
      const rating = avgRating(p.id) || 0;
      const count = reviewsCount(p.id) || 0;
      
      return `<article class="card">
        <picture>
          <source type="image/webp" srcset="${p.imageWebp || p.image}">
          <img src="${p.image}" alt="${p.name} bottle" loading="lazy" width="300" height="300">
        </picture>
        <div class="pad">
          <h3>${p.name}</h3>
          <div class="meta">${(p.notes || []).slice(0, 3).join(' ‚Ä¢ ')}</div>
          <div class="meta">${renderStars(rating)} <span class="muted">(${count})</span></div>
          <div class="price">${formatPrice(p.price)}</div>
          <div class="actions"><button class="btn" onclick="addToCart('${p.id}')">Add to cart</button></div>
        </div>
      </article>`; }
    
    function renderBestsellers() {
      try {
        const bestGrid = document.getElementById('bestGrid');
        if (!bestGrid) {
          console.error('Bestsellers grid element not found');
          return;
        }
        
        // Check if PRODUCTS data is available
        if (typeof PRODUCTS === 'undefined' || !PRODUCTS || PRODUCTS.length === 0) {
          console.warn('PRODUCTS data not available yet, retrying in 100ms...');
          setTimeout(renderBestsellers, 100);
          return;
        }
        
        // Get featured products and limit to 3
        let featuredProducts = PRODUCTS.filter(p => p.featured).slice(0, 3);
        
        // If less than 3 featured, add some popular ones
        if (featuredProducts.length < 3) {
          const remainingProducts = PRODUCTS.filter(p => !p.featured).slice(0, 3 - featuredProducts.length);
          featuredProducts.push(...remainingProducts);
        }
        
        // Fallback: if still no products, show first 3 available
        if (featuredProducts.length === 0) {
          featuredProducts = PRODUCTS.slice(0, 3);
        }
        
        // Ensure we have at least 3 products
        if (featuredProducts.length === 0) {
          bestGrid.innerHTML = '<p class="muted">No products available at the moment.</p>';
          return;
        }
        
        bestGrid.innerHTML = featuredProducts.map(card).join('');
        
        console.log(`Rendered ${featuredProducts.length} bestsellers:`, featuredProducts.map(p => p.name));
        
      } catch (error) {
        console.error('Error rendering bestsellers:', error);
        const bestGrid = document.getElementById('bestGrid');
        if (bestGrid) {
          bestGrid.innerHTML = '<p class="muted">Error loading bestsellers. Please refresh the page.</p>';
        }
      }
    }
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeHome);
    } else {
      initializeHome();
    }
    
    // Also listen for when data.js finishes loading
    document.addEventListener('data:loaded', () => {
      console.log('Data loaded event received, rendering bestsellers...');
      renderBestsellers();
    });
    
  })();
</script>

<footer>
  <div class="container">
    <p class="muted">A scent isn't just a smell ‚Äî it's a signature. RRD Collection curates bold, mood‚Äëdefining fragrances for those who walk into the room already unforgettable.</p>
    <small>¬© <span id="year"></span> RRD Collection. All rights reserved. | <a href="/privacy.html">Privacy Policy</a> | <a href="/terms.html">Terms of Service</a></small>
  </div>
</footer>
<div id="toast" aria-live="polite"></div>

<!-- Floating WhatsApp Button -->
<div class="floating-whatsapp">
  <a href="https://wa.me/971559938295?text=Hi%20RRD%20Collection!%20I%20have%20a%20question%20about%20your%20fragrances." 
     class="btn" target="_blank" rel="noopener" aria-label="Contact us on WhatsApp">
    üì±
  </a>
</div>

<script>document.getElementById('year').textContent = new Date().getFullYear();</script>
</body></html> 